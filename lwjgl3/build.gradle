plugins {
    id "application"
    id "kotlin"
    id "java-library"
    id "idea"
    id "org.jetbrains.kotlin.plugin.serialization"
}

sourceSets.main.resources.srcDirs += [rootProject.file("assets").path]
mainClassName = "dev.plotsky.cavefarming.lwjgl3.Lwjgl3Launcher"
sourceCompatibility = 11.0

dependencies {
    implementation project(":core")
    implementation "com.badlogicgames.gdx:gdx-backend-lwjgl3:$gdxVersion"
    implementation "com.badlogicgames.gdx:gdx-box2d-platform:$gdxVersion:natives-desktop"
    implementation "com.badlogicgames.gdx:gdx-platform:$gdxVersion:natives-desktop"
}

import org.gradle.internal.os.OperatingSystem

run {
    workingDir = rootProject.file("assets").path
    setIgnoreExitValue(true)

    if (OperatingSystem.current() == OperatingSystem.MAC_OS) {
        // Required to run LWJGL3 Java apps on MacOS
        jvmArgs += "-XstartOnFirstThread"
    }
}
